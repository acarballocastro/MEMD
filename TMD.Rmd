---
title: "Trabajo Mineria de dada"
author: "Todo El Grupo"
date: "24/9/2021"
output:
  html_document:
    df_print: paged
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE , comment = '', warning = F)
```

# 1 Estructura de base de dadas

```{r Data Read}
path<-strsplit(shell('dir TMD.Rmd',intern = T)[4],' ')[[1]][4]
filename<- 'hotel_bookings.csv'
setwd(path)
getwd()
```

## 1.1 Filtre de bases de dada

```{r Data Selection}
source('outputs/0.Informacion.r')
```

## 1.2 Descripcion de datos faltantes

```{r missing description,fig.width=3,fig.height=2}
source('outputs/1.Missing.r')
```

## 1.3 Decralacion de variables

```{r Data Decralation}
source('input/1.2.Declaracion.r')
sapply(d.e, class)
```

\newpage

# 2 Descriptiva de base de dadas

```{r, fig.width=3,fig.height=2}
source('outputs/2.Descriptiva.r')
```

\newpage

# 3 Preprocessing

## 3.1 Missing

Los missing que tengamos est?n en las variables company y agent, la cuales no son falta de respuestas sino que indica si un cliente hizo la resrva a trav?s de una agencia o no en el caso de agent, an?logamente con la variabel company Asi que eliminamos las variables company y agent pero a?adimos dos variable restype que inidca si es una reserva hecha por agente o compa??a o no

```{r}
source('input/3.1.Missing_tract.r')
any(is.na(d.e))
summary(d.e$is_agent)
summary(d.e$is_company)
```

## 3.2 Creacion de nuevas variables

Creamos una nueva variable, si la habitaci?n reservada se corresponde con la habitaci?n asignada o no, Creemos qu esto puede tener m?s relevancia que el tipo de habitaciones que no conocemos debido a que es an?nimo

Y tambien creamos las variables si ha cancelalato , si ha asignado y si han estat algun dia a la llista d'espera o no anteriorment 

```{r}
source('input/3.2.New_variable.r')
summary(d.new_crea)
plot(data=d.new_crea,is_canceled~.,col=c('red','steelblue'))
```

## 3.3 Multicolinealidad y Outlier

```{r}
source('outputs/3.Correlacion_deteccion.r')
```

Nos fijamos que nuestra variable respuesta esta igualmente distribuida en la variable arrival_date_day_of_month por lo que no aporta informacion nueva Sin embargo, la variable que hacer referencia al año si que es relevante, no obstante no la tendremos en cuenta ya que valoramos que no es interesante para los modelos que estudiaremos

Como que no tiene mucha diferencia entre numero de semanas y meses dentro un año, eliminamos tambien el numero de semanas

La variable reservation_status tiene misma informacion que la nuestra variable explicativa asi que la eliminamos

Visto la alta correlacion entre previous_cancellations y previous_bookings_not_canceled, decidimos que eliminamos el previous_bookings_not_canceled, y logicamente el if_prev_asign tambien

```{r}
source('input/3.3.Correlacion_tract.r')
```

\newpage

# 4 Analisi Descriptiva Prossecada

## 4.1 Analisi Descriptiva univariante

```{r,fig.width=3,fig.height=2}
source('outputs/4.1.Descriptiva_univariante.r')
```


## 4.2 Analisi Descriptiva Bivariante

```{r}
source('outputs/4.2.Descriptiva_bivariante.r')
```

\newpage

# 5 Lo que sea














